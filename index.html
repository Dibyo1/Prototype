<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#00ffff">
    <meta name="description" content="Advanced AI-powered fake news detection and content verification system">
    <meta name="keywords" content="fake news, fact checking, AI verification, content analysis">
    <meta name="author" content="TruthGuard AI">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/png" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üõ°Ô∏è</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üõ°Ô∏è</text></svg>">
    
    <title>TruthGuard AI - Advanced Verification System</title>
    
    <!-- Modern Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/particles.js/2.0.0/particles.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;500;600;700&display=swap');
        
        :root {
            --primary-color: #00ffff;
            --secondary-color: #ff006f;
            --accent-color: #ffed4e;
            --bg-dark: #0a0a0a;
            --bg-darker: #050505;
            --text-primary: #ffffff;
            --text-secondary: #b0b0b0;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-darker);
            color: var(--text-primary);
            overflow-x: hidden;
            cursor: none;
        }
        
        /* Custom Cursor */
        body {
            cursor: none;
        }
        
        .cursor {
            position: fixed;
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            pointer-events: none;
            z-index: 10000;
            mix-blend-mode: difference;
            transform-origin: center;
            transition: transform 0.1s ease;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }
        
        .cursor-trail {
            position: fixed;
            width: 8px;
            height: 8px;
            background: var(--primary-color);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            opacity: 0.6;
            transition: all 0.15s ease;
        }
        
        /* Particles Background */
        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--bg-darker) 0%, #1a0033 50%, #000066 100%);
            z-index: -1;
        }
        
        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-darker);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 1s ease-out;
        }
        
        .loading-content {
            text-align: center;
        }
        
        .loading-logo {
            font-family: 'Orbitron', monospace;
            font-size: 4rem;
            font-weight: 900;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 2rem;
        }
        
        .loading-bar {
            width: 300px;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            margin: 0 auto 2rem;
        }
        
        .loading-progress {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 2px;
            transition: width 0.5s ease;
        }
        
        .loading-text {
            font-size: 1.2rem;
            color: var(--text-secondary);
            font-weight: 300;
        }
        
        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 2rem;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
            z-index: 1000;
            transform: translateY(-100px);
        }
        
        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .logo {
            font-family: 'Orbitron', monospace;
            font-size: 2rem;
            font-weight: 900;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .nav-menu {
            display: flex;
            list-style: none;
            gap: 2rem;
        }
        
        .nav-item {
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .nav-item:hover {
            color: var(--primary-color);
        }
        
        .nav-item::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary-color);
            transition: width 0.3s ease;
        }
        
        .nav-item:hover::after {
            width: 100%;
        }
        
        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 0 2rem;
            position: relative;
        }
        
        .hero-content {
            max-width: 1000px;
            z-index: 2;
        }
        
        .hero-title {
            font-family: 'Orbitron', monospace;
            font-size: clamp(3rem, 8vw, 8rem);
            font-weight: 900;
            margin-bottom: 2rem;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.1;
        }
        
        .hero-subtitle {
            font-size: 1.8rem;
            color: var(--text-secondary);
            margin-bottom: 3rem;
            font-weight: 300;
        }
        
        .hero-description {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 4rem;
            line-height: 1.6;
        }
        
        .cta-button {
            display: inline-block;
            padding: 1.5rem 3rem;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border: none;
            border-radius: 50px;
            color: white;
            font-size: 1.2rem;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 40px rgba(0, 255, 255, 0.3);
        }
        
        .cta-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }
        
        .cta-button:hover::before {
            left: 100%;
        }
        
        /* Features Section */
        .features {
            padding: 10rem 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .features-title {
            font-family: 'Orbitron', monospace;
            font-size: 3.5rem;
            font-weight: 900;
            text-align: center;
            margin-bottom: 6rem;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 3rem;
        }
        
        .feature-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 3rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.5s ease;
            position: relative;
            overflow: hidden;
        }
        
        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(0, 255, 255, 0.1), transparent);
            transition: left 0.5s ease;
        }
        
        .feature-card:hover::before {
            left: 100%;
        }
        
        .feature-card:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 30px 60px rgba(0, 255, 255, 0.2);
        }
        
        .feature-icon {
            font-size: 4rem;
            margin-bottom: 2rem;
            display: block;
        }
        
        .feature-title {
            font-family: 'Orbitron', monospace;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: var(--primary-color);
        }
        
        .feature-description {
            font-size: 1.1rem;
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 2rem;
        }
        
        .feature-status {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            color: white;
        }
        
        .feature-status.coming-soon {
            background: linear-gradient(45deg, var(--accent-color), #ff9500);
            color: var(--bg-dark);
        }
        
        /* Verification Interface */
        .verification-interface {
            display: none;
            min-height: 100vh;
            padding: 8rem 2rem 4rem;
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .interface-card {
            background: var(--glass-bg);
            backdrop-filter: blur(30px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 4rem;
            position: relative;
            overflow: hidden;
        }
        
        .interface-title {
            font-family: 'Orbitron', monospace;
            font-size: 2.5rem;
            font-weight: 900;
            text-align: center;
            margin-bottom: 3rem;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .back-button {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--primary-color);
            padding: 1rem 2rem;
            border-radius: 50px;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            margin-bottom: 3rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .back-button:hover {
            background: var(--primary-color);
            color: var(--bg-dark);
            transform: translateX(-5px);
        }
        
        .input-group {
            margin-bottom: 3rem;
        }
        
        .input-label {
            display: block;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }
        
        .input-field {
            width: 100%;
            padding: 1.5rem;
            background: var(--glass-bg);
            border: 2px solid var(--glass-border);
            border-radius: 16px;
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            transition: all 0.3s ease;
            resize: vertical;
        }
        
        .input-field:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.3);
        }
        
        .verify-button {
            width: 100%;
            padding: 1.5rem;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border: none;
            border-radius: 16px;
            color: white;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }
        
        .verify-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0, 255, 255, 0.4);
        }
        
        .verify-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* Result Display */
        .result-container {
            margin-top: 3rem;
        }
        
        .result {
            padding: 2rem;
            border-radius: 16px;
            margin-top: 2rem;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.5s ease;
        }
        
        .result.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .result.verified {
            background: rgba(0, 255, 100, 0.1);
            border: 2px solid rgba(0, 255, 100, 0.3);
        }
        
        .result.fake {
            background: rgba(255, 50, 50, 0.1);
            border: 2px solid rgba(255, 50, 50, 0.3);
        }
        
        .result.uncertain {
            background: rgba(255, 255, 0, 0.1);
            border: 2px solid rgba(255, 255, 0, 0.3);
        }
        
        .result.malicious {
            background: rgba(255, 0, 0, 0.2);
            border: 2px solid rgba(255, 0, 0, 0.5);
            animation: pulse-danger 2s infinite;
        }
        
        @keyframes pulse-danger {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 0, 0, 0.3); }
            50% { box-shadow: 0 0 40px rgba(255, 0, 0, 0.6); }
        }
        
        .result-header {
            font-family: 'Orbitron', monospace;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
        }
        
        .result-details {
            display: grid;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .result-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: 12px;
        }
        
        .result-item-title {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }
        
        .result-score {
            font-size: 2rem;
            font-weight: 900;
            text-align: center;
            margin-top: 1rem;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .interface-card {
                padding: 2rem;
            }
            
            .hero-title {
                font-size: 3rem;
            }
            
            .features-title {
                font-size: 2.5rem;
            }
        }
        
        /* Advanced Loading Animation Styles */
        .loading-animation {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 2rem;
        }
        
        .neural-loader {
            position: relative;
            width: 120px;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .neural-ring {
            position: absolute;
            border: 3px solid transparent;
            border-radius: 50%;
            animation: neural-pulse 3s ease-in-out infinite;
        }
        
        .neural-ring:nth-child(1) {
            width: 120px;
            height: 120px;
            border-top: 3px solid var(--primary-color);
            border-right: 3px solid var(--primary-color);
            animation-delay: 0s;
            filter: drop-shadow(0 0 10px var(--primary-color));
        }
        
        .neural-ring:nth-child(2) {
            width: 90px;
            height: 90px;
            border-bottom: 3px solid var(--secondary-color);
            border-left: 3px solid var(--secondary-color);
            animation-delay: -0.5s;
            filter: drop-shadow(0 0 10px var(--secondary-color));
        }
        
        .neural-ring:nth-child(3) {
            width: 60px;
            height: 60px;
            border-top: 3px solid var(--accent-color);
            border-bottom: 3px solid var(--accent-color);
            animation-delay: -1s;
            filter: drop-shadow(0 0 10px var(--accent-color));
        }
        
        .neural-core {
            width: 30px;
            height: 30px;
            background: radial-gradient(circle, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            box-shadow: 0 0 20px var(--primary-color);
            animation: core-pulse 2s ease-in-out infinite;
        }
        
        @keyframes neural-pulse {
            0%, 100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
            50% {
                transform: scale(1.1) rotate(180deg);
                opacity: 0.8;
            }
        }
        
        @keyframes core-pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 20px var(--primary-color);
            }
            50% {
                transform: scale(1.2);
                box-shadow: 0 0 30px var(--primary-color), 0 0 40px var(--secondary-color);
            }
        }
        
        .data-stream {
            display: flex;
            gap: 8px;
            align-items: flex-end;
            height: 40px;
        }
        
        .stream-line {
            width: 4px;
            background: linear-gradient(to top, var(--primary-color), var(--secondary-color));
            border-radius: 2px;
            transform-origin: bottom;
            box-shadow: 0 0 10px var(--primary-color);
        }
        
        .stream-line:nth-child(1) {
            height: 20px;
        }
        
        .stream-line:nth-child(2) {
            height: 35px;
        }
        
        .stream-line:nth-child(3) {
            height: 25px;
        }
        
        .loading-title {
            font-family: 'Orbitron', monospace;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
            text-shadow: 0 0 10px var(--primary-color);
        }
        
        .loading-subtitle {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }
        
        .processing-dots {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .processing-dots span {
            width: 8px;
            height: 8px;
            background: var(--primary-color);
            border-radius: 50%;
            box-shadow: 0 0 10px var(--primary-color);
        }
        
        /* Image Verification Styles */
        .image-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 3rem;
            gap: 1rem;
        }
        
        .image-tab {
            padding: 1rem 2rem;
            background: var(--glass-bg);
            border: 2px solid var(--glass-border);
            border-radius: 12px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
        }
        
        .image-tab.active {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-color: transparent;
        }
        
        .image-tab:hover {
            transform: translateY(-2px);
        }
        
        .image-tab-content {
            display: none;
        }
        
        .image-tab-content.active {
            display: block;
        }
        
        .stego-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
            gap: 0.5rem;
        }
        
        .stego-tab {
            padding: 0.75rem 1.5rem;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            font-weight: 400;
            font-size: 0.9rem;
        }
        
        .stego-tab.active {
            background: var(--primary-color);
            color: var(--bg-dark);
            border-color: var(--primary-color);
        }
        
        .stego-tab-content {
            display: none;
        }
        
        .stego-tab-content.active {
            display: block;
        }
        
        .image-upload-area {
            border: 2px dashed var(--glass-border);
            border-radius: 16px;
            padding: 3rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .image-upload-area:hover {
            border-color: var(--primary-color);
            background: rgba(0, 255, 255, 0.05);
        }
        
        .image-upload-area.dragover {
            border-color: var(--primary-color);
            background: rgba(0, 255, 255, 0.1);
            transform: scale(1.02);
        }
        
        .upload-placeholder {
            pointer-events: none;
        }
        
        .upload-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.7;
        }
        
        .upload-subtitle {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 0.5rem;
        }
        
        .image-result {
            margin-top: 2rem;
            padding: 2rem;
            background: var(--glass-bg);
            border-radius: 16px;
            border: 1px solid var(--glass-border);
        }
        
        .trust-score-display {
            text-align: center;
            margin: 2rem 0;
        }
        
        .trust-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 900;
            color: white;
            position: relative;
        }
        
        .trust-circle.high {
            background: linear-gradient(135deg, #00ff64, #00cc50);
            box-shadow: 0 0 30px rgba(0, 255, 100, 0.4);
        }
        
        .trust-circle.medium {
            background: linear-gradient(135deg, #ffed4e, #ffa500);
            box-shadow: 0 0 30px rgba(255, 237, 78, 0.4);
        }
        
        .trust-circle.low {
            background: linear-gradient(135deg, #ff4444, #cc0000);
            box-shadow: 0 0 30px rgba(255, 68, 68, 0.4);
        }
        
        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }
        
        .analysis-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid var(--glass-border);
        }
        
        .analysis-item-title {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }
        
        .analysis-item-value {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }
        
        .analysis-item-details {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }
        
        .encoded-image-result {
            text-align: center;
            margin-top: 2rem;
        }
        
        .encoded-image-result img {
            max-width: 400px;
            border-radius: 12px;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
            margin-bottom: 1rem;
        }
        
        .download-button {
            display: inline-block;
            padding: 1rem 2rem;
            background: linear-gradient(45deg, var(--accent-color), #ff9500);
            color: var(--bg-dark);
            text-decoration: none;
            border-radius: 12px;
            font-weight: 600;
            margin-top: 1rem;
            transition: all 0.3s ease;
        }
        
        .download-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 237, 78, 0.3);
        }
        
        .decoded-message {
            background: rgba(0, 255, 100, 0.1);
            border: 1px solid rgba(0, 255, 100, 0.3);
            padding: 1.5rem;
            border-radius: 12px;
            margin-top: 1rem;
            word-break: break-word;
        }
        
        .decoded-message-title {
            color: #00ff64;
            font-weight: 600;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }
        
        .decoded-message-content {
            font-size: 1.1rem;
            line-height: 1.5;
        }
        
        .no-message {
            background: rgba(255, 255, 0, 0.1);
            border: 1px solid rgba(255, 255, 0, 0.3);
            color: var(--accent-color);
        }
        
        /* Utility Classes */
        .hidden {
            display: none !important;
        }
        
        .fade-in {
            opacity: 0;
            transform: translateY(50px);
        }
        
        .slide-in-left {
            opacity: 0;
            transform: translateX(-50px);
        }
        
        .slide-in-right {
            opacity: 0;
            transform: translateX(50px);
        }
    </style>
</head>
<body>
    <!-- Custom Cursor -->
    <div class="cursor"></div>
    <div class="cursor-trail"></div>
    
    <!-- Particles Background -->
    <div id="particles-js"></div>
    
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <div class="loading-logo">TruthGuard AI</div>
            <div class="loading-bar">
                <div class="loading-progress" id="loadingProgress"></div>
            </div>
            <div class="loading-text" id="loadingText">Initializing AI Systems...</div>
        </div>
    </div>
    
    <!-- Header -->
    <header class="header" id="header">
        <nav class="nav">
            <div class="logo">TruthGuard AI</div>
            <ul class="nav-menu">
                <li class="nav-item" onclick="showHome()">Home</li>
                <li class="nav-item" onclick="showFeatures()">Features</li>
            </ul>
        </nav>
    </header>
    
    <!-- Hero Section -->
    <section class="hero" id="heroSection">
        <div class="hero-content">
            <h1 class="hero-title fade-in">TruthGuard AI</h1>
            <h2 class="hero-subtitle fade-in">Advanced AI-Powered Verification System</h2>
            <p class="hero-description fade-in">
                Harness the power of cutting-edge artificial intelligence to detect misinformation, 
                verify content authenticity, and protect against digital deception with unparalleled accuracy.
            </p>
            <button class="cta-button fade-in" onclick="showFeatures()">
                Start Verification
            </button>
        </div>
    </section>
    
    <!-- Features Section -->
    <section class="features hidden" id="featuresSection">
        <h2 class="features-title slide-in-left">AI Verification Tools</h2>
        <div class="features-grid">
            <div class="feature-card fade-in" onclick="openTextVerifier()" data-delay="0">
                <div class="feature-icon">üîç</div>
                <h3 class="feature-title">Text Verification</h3>
                <p class="feature-description">
                    Advanced NLP algorithms analyze text content for accuracy, bias detection, 
                    and factual verification using state-of-the-art transformer models.
                </p>
                <span class="feature-status">Active</span>
            </div>
            
            <div class="feature-card fade-in" onclick="openLinkVerifier()" data-delay="0.2">
                <div class="feature-icon">üåê</div>
                <h3 class="feature-title">Link Verification</h3>
                <p class="feature-description">
                    Real-time URL analysis checking domain reputation, security threats, 
                    and source authenticity using multiple verification databases.
                </p>
                <span class="feature-status">Active</span>
            </div>
            
            <div class="feature-card fade-in" onclick="openImageVerifier()" data-delay="0.4">
                <div class="feature-icon">üîí</div>
                <h3 class="feature-title">Steganography Tools</h3>
                <p class="feature-description">
                    Hide and extract secret messages in images using advanced steganography techniques.
                    Secure communication through digital image encoding and decoding.
                </p>
                <span class="feature-status">Active</span>
            </div>
        </div>
    </section>
    
    <!-- Text Verification Interface -->
    <section class="verification-interface" id="textInterface">
        <div class="interface-card">
            <button class="back-button" onclick="showFeatures()">‚Üê Back to Features</button>
            <h2 class="interface-title">Text Verification</h2>
            
            <!-- Text Verification Sub-tabs -->
            <div class="stego-tabs">
                <button class="stego-tab active" onclick="showTextTab('text')">Text Input</button>
                <button class="stego-tab" onclick="showTextTab('pdf')">PDF Document</button>
            </div>
            
            <!-- Text Input Tab -->
            <div class="stego-tab-content active" id="text">
                <div class="input-group">
                    <label class="input-label">Enter text to verify:</label>
                    <textarea class="input-field" id="textInput" rows="6" 
                        placeholder="Paste the text content you want to verify for accuracy and authenticity..."></textarea>
                </div>
                
                <button class="verify-button" onclick="verifyText()">
                    Analyze Text Authenticity
                </button>
                
                <div class="result-container" id="textResults"></div>
            </div>
            
            <!-- PDF Upload Tab -->
            <div class="stego-tab-content" id="pdf">
                <div class="input-group">
                    <div class="coming-soon-container" style="text-align: center; padding: 4rem 2rem; background: var(--glass-bg); border-radius: 16px; border: 1px solid var(--glass-border);">
                        <div class="coming-soon-icon" style="font-size: 4rem; margin-bottom: 2rem; opacity: 0.7;">üìÑ</div>
                        <h3 style="font-family: 'Orbitron', monospace; font-size: 2rem; font-weight: 700; color: var(--primary-color); margin-bottom: 1rem;">PDF Document Verification</h3>
                        <div class="feature-status coming-soon" style="display: inline-block; padding: 0.75rem 1.5rem; background: linear-gradient(45deg, var(--accent-color), #ff9500); color: var(--bg-dark); border-radius: 20px; font-size: 1rem; font-weight: 600; margin-bottom: 2rem;">Coming Soon</div>
                        <p style="font-size: 1.1rem; color: var(--text-secondary); line-height: 1.6; max-width: 500px; margin: 0 auto;">Advanced PDF document analysis and fact-checking capabilities are currently in development. This feature will provide comprehensive verification of document authenticity, content analysis, and source validation.</p>
                        <div style="margin-top: 2rem; padding: 1.5rem; background: rgba(255, 237, 78, 0.1); border: 1px solid rgba(255, 237, 78, 0.3); border-radius: 12px;">
                            <h4 style="color: var(--accent-color); margin-bottom: 1rem; font-weight: 600;">üöÄ Upcoming Features:</h4>
                            <ul style="text-align: left; color: var(--text-secondary); line-height: 1.8;">
                                <li>üìä Text extraction and analysis from PDF documents</li>
                                <li>üîç Metadata verification and authenticity checks</li>
                                <li>üìà Content credibility scoring and source validation</li>
                                <li>üõ°Ô∏è Digital signature and tampering detection</li>
                                <li>üìã Comprehensive document integrity reports</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Link Verification Interface -->
    <section class="verification-interface" id="linkInterface">
        <div class="interface-card">
            <button class="back-button" onclick="showFeatures()">‚Üê Back to Features</button>
            <h2 class="interface-title">Link Verification</h2>
            
            <div class="input-group">
                <label class="input-label">Enter URL to verify:</label>
                <input type="url" class="input-field" id="linkInput" 
                    placeholder="https://example.com">
            </div>
            
            <button class="verify-button" onclick="verifyLink()">
                Verify Link Safety
            </button>
            
            <div class="result-container" id="linkResults"></div>
        </div>
    </section>
    
    <!-- Image Verification Interface -->
    <section class="verification-interface" id="imageInterface">
        <div class="interface-card">
            <button class="back-button" onclick="showFeatures()">‚Üê Back to Features</button>
            <h2 class="interface-title">Steganography Tools</h2>
            
            <!-- Steganography Sub-tabs -->
            <div class="stego-tabs">
                <button class="stego-tab active" onclick="showStegoTab('encode')">Encode Message</button>
                <button class="stego-tab" onclick="showStegoTab('decode')">Decode Message</button>
            </div>
            
            <!-- Encode Tab -->
            <div class="stego-tab-content active" id="encode">
                <div class="input-group">
                    <label class="input-label">Upload image to hide message in:</label>
                    <div class="image-upload-area" id="encodeImageUpload">
                        <div class="upload-placeholder">
                            <div class="upload-icon">üñºÔ∏è</div>
                            <p>Drag & drop image here or click to select</p>
                            <p class="upload-subtitle">The message will be hidden in this image</p>
                        </div>
                        <input type="file" id="encodeImageInput" accept="image/*" style="display: none;">
                        <img id="encodeImagePreview" style="display: none; max-width: 100%; border-radius: 12px; margin-top: 1rem;">
                    </div>
                </div>
                
                <div class="input-group">
                    <label class="input-label">Secret message to hide:</label>
                    <textarea class="input-field" id="secretMessage" rows="4" 
                        placeholder="Enter the secret message you want to hide in the image..."></textarea>
                </div>
                
                <button class="verify-button" onclick="encodeMessage()" id="encodeBtn" disabled>
                    üîí Hide Message in Image
                </button>
                
                <div class="result-container" id="encodeResults"></div>
            </div>
            
            <!-- Decode Tab -->
            <div class="stego-tab-content" id="decode">
                <div class="input-group">
                    <label class="input-label">Upload image to extract hidden message:</label>
                    <div class="image-upload-area" id="decodeImageUpload">
                        <div class="upload-placeholder">
                            <div class="upload-icon">üîç</div>
                            <p>Drag & drop image here or click to select</p>
                            <p class="upload-subtitle">We'll search for hidden messages</p>
                        </div>
                        <input type="file" id="decodeImageInput" accept="image/*" style="display: none;">
                        <img id="decodeImagePreview" style="display: none; max-width: 100%; border-radius: 12px; margin-top: 1rem;">
                    </div>
                </div>
                
                <button class="verify-button" onclick="decodeMessage()" id="decodeBtn" disabled>
                    üîì Extract Hidden Message
                </button>
                
                <div class="result-container" id="decodeResults"></div>
            </div>
        </div>
    </section>

    <script>
        // Initialize GSAP
        gsap.registerPlugin(ScrollTrigger, TextPlugin);
        
        // Global variables
        let currentSection = 'hero';
        let isOnline = navigator.onLine;
        let analyticsData = [];
        let processingQueue = [];
        
        // Service Worker Registration for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
        
        // Online/Offline status monitoring
        window.addEventListener('online', () => {
            isOnline = true;
            showNotification('Connection restored - syncing data...', 'success');
            processOfflineQueue();
        });
        
        window.addEventListener('offline', () => {
            isOnline = false;
            showNotification('You are offline - requests will be queued', 'info');
        });
        
        // Install PWA prompt
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            showInstallPrompt();
        });
        
        function showInstallPrompt() {
            const installBanner = document.createElement('div');
            installBanner.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 12px;
                font-weight: 600;
                z-index: 10000;
                cursor: pointer;
                box-shadow: 0 10px 30px rgba(0, 255, 255, 0.3);
                max-width: 300px;
            `;
            installBanner.innerHTML = `
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <span>üì°</span>
                    <div>
                        <div style="font-size: 0.9rem;">Install TruthGuard AI</div>
                        <div style="font-size: 0.7rem; opacity: 0.8;">Get faster access and offline features</div>
                    </div>
                    <button onclick="installPWA()" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 0.5rem; border-radius: 6px; cursor: pointer;">‚úì</button>
                    <button onclick="this.parentElement.parentElement.remove()" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 0.5rem; border-radius: 6px; cursor: pointer;">√ó</button>
                </div>
            `;
            document.body.appendChild(installBanner);
            
            setTimeout(() => {
                if (installBanner.parentElement) {
                    installBanner.remove();
                }
            }, 10000);
        }
        
        async function installPWA() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                console.log(`User response to the install prompt: ${outcome}`);
                deferredPrompt = null;
            }
        }
        
        // Custom cursor - Optimized for performance
        function initCursor() {
            const cursor = document.querySelector('.cursor');
            const trail = document.querySelector('.cursor-trail');
            
            let mouseX = 0;
            let mouseY = 0;
            let trailX = 0;
            let trailY = 0;
            
            // Update mouse position
            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
                
                // Update cursor position immediately
                cursor.style.left = mouseX - 10 + 'px';
                cursor.style.top = mouseY - 10 + 'px';
            });
            
            // Smooth trail animation
            function animateTrail() {
                trailX += (mouseX - trailX) * 0.1;
                trailY += (mouseY - trailY) * 0.1;
                
                trail.style.left = trailX - 4 + 'px';
                trail.style.top = trailY - 4 + 'px';
                
                requestAnimationFrame(animateTrail);
            }
            animateTrail();
            
            // Hover effects for interactive elements
            const interactiveElements = document.querySelectorAll('button, .feature-card, .nav-item, a, input, textarea');
            
            interactiveElements.forEach(el => {
                el.addEventListener('mouseenter', () => {
                    cursor.style.transform = 'scale(1.5)';
                    cursor.style.background = 'linear-gradient(135deg, #ff006f, #ffed4e)';
                });
                
                el.addEventListener('mouseleave', () => {
                    cursor.style.transform = 'scale(1)';
                    cursor.style.background = 'linear-gradient(135deg, var(--primary-color), var(--secondary-color))';
                });
            });
        }
        
        // Initialize particles
        function initParticles() {
            particlesJS('particles-js', {
                particles: {
                    number: { value: 80 },
                    color: { value: '#00ffff' },
                    shape: { type: 'circle' },
                    opacity: { value: 0.5, random: true },
                    size: { value: 3, random: true },
                    line_linked: {
                        enable: true,
                        distance: 150,
                        color: '#00ffff',
                        opacity: 0.4,
                        width: 1
                    },
                    move: {
                        enable: true,
                        speed: 2,
                        direction: 'none',
                        random: false,
                        straight: false,
                        out_mode: 'out',
                        bounce: false
                    }
                },
                interactivity: {
                    detect_on: 'canvas',
                    events: {
                        onhover: { enable: true, mode: 'repulse' },
                        onclick: { enable: true, mode: 'push' }
                    }
                },
                retina_detect: true
            });
        }
        
        // Loading sequence
        function initLoading() {
            const loadingTexts = [
                'Initializing AI Systems...',
                'Loading Neural Networks...',
                'Calibrating Algorithms...',
                'Connecting to Verification APIs...',
                'Preparing Interface...',
                'System Ready!'
            ];
            
            let currentText = 0;
            const progressBar = document.getElementById('loadingProgress');
            const loadingText = document.getElementById('loadingText');
            
            const interval = setInterval(() => {
                if (currentText < loadingTexts.length) {
                    gsap.to(progressBar, {
                        width: `${((currentText + 1) / loadingTexts.length) * 100}%`,
                        duration: 0.5
                    });
                    
                    gsap.to(loadingText, {
                        text: loadingTexts[currentText],
                        duration: 0.5
                    });
                    
                    currentText++;
                } else {
                    clearInterval(interval);
                    setTimeout(hideLoading, 1000);
                }
            }, 800);
        }
        
        function hideLoading() {
            const loadingScreen = document.getElementById('loadingScreen');
            
            gsap.to(loadingScreen, {
                opacity: 0,
                duration: 1,
                onComplete: () => {
                    loadingScreen.style.display = 'none';
                    showHero();
                }
            });
        }
        
        function showHero() {
            const hero = document.getElementById('heroSection');
            const header = document.getElementById('header');
            
            // Show header
            gsap.to(header, {
                y: 0,
                duration: 1,
                ease: 'power3.out'
            });
            
            // Animate hero elements
            gsap.fromTo('.fade-in', 
                { opacity: 0, y: 50 },
                { 
                    opacity: 1, 
                    y: 0, 
                    duration: 1.2, 
                    stagger: 0.2,
                    ease: 'power3.out'
                }
            );
            
            currentSection = 'hero';
        }
        
        function showFeatures() {
            const hero = document.getElementById('heroSection');
            const features = document.getElementById('featuresSection');
            
            // Hide hero
            gsap.to(hero, {
                opacity: 0,
                duration: 0.5,
                onComplete: () => {
                    hero.classList.add('hidden');
                    features.classList.remove('hidden');
                    
                    // Animate features
                    gsap.fromTo('.slide-in-left', 
                        { opacity: 0, x: -50 },
                        { opacity: 1, x: 0, duration: 1, ease: 'power3.out' }
                    );
                    
                    gsap.fromTo('.fade-in', 
                        { opacity: 0, y: 50 },
                        { 
                            opacity: 1, 
                            y: 0, 
                            duration: 1, 
                            stagger: (i, el) => parseFloat(el.dataset.delay) || 0,
                            ease: 'power3.out'
                        }
                    );
                }
            });
            
            currentSection = 'features';
        }
        
        function showHome() {
            hideAllInterfaces();
            
            const hero = document.getElementById('heroSection');
            const features = document.getElementById('featuresSection');
            
            features.classList.add('hidden');
            hero.classList.remove('hidden');
            
            gsap.to(hero, { opacity: 1, duration: 0.5 });
            currentSection = 'hero';
        }
        
        function hideAllInterfaces() {
            document.querySelectorAll('.verification-interface').forEach(interface => {
                interface.style.display = 'none';
            });
        }
        
        function openTextVerifier() {
            hideAllInterfaces();
            document.getElementById('featuresSection').classList.add('hidden');
            
            const textInterface = document.getElementById('textInterface');
            textInterface.style.display = 'block';
            
            gsap.fromTo(textInterface.querySelector('.interface-card'),
                { opacity: 0, scale: 0.9 },
                { opacity: 1, scale: 1, duration: 0.8, ease: 'power3.out' }
            );
            
            currentSection = 'text';
        }
        
        function openLinkVerifier() {
            hideAllInterfaces();
            document.getElementById('featuresSection').classList.add('hidden');
            
            const linkInterface = document.getElementById('linkInterface');
            linkInterface.style.display = 'block';
            
            gsap.fromTo(linkInterface.querySelector('.interface-card'),
                { opacity: 0, scale: 0.9 },
                { opacity: 1, scale: 1, duration: 0.8, ease: 'power3.out' }
            );
            
            currentSection = 'link';
        }
        
        function openImageVerifier() {
            hideAllInterfaces();
            document.getElementById('featuresSection').classList.add('hidden');
            
            const imageInterface = document.getElementById('imageInterface');
            imageInterface.style.display = 'block';
            
            gsap.fromTo(imageInterface.querySelector('.interface-card'),
                { opacity: 0, scale: 0.9 },
                { opacity: 1, scale: 1, duration: 0.8, ease: 'power3.out' }
            );
            
            currentSection = 'image';
        }
        
        // Enhanced API Functions with real-time progress tracking
        async function verifyText() {
            const textInput = document.getElementById('textInput');
            const resultsDiv = document.getElementById('textResults');
            const button = document.querySelector('#textInterface .verify-button');
            
            const text = textInput.value.trim();
            if (!text) {
                showNotification('Please enter text to verify', 'error');
                return;
            }
            
            // Check if text is too long
            if (text.length > 10000) {
                showNotification('Text too long. Maximum 10,000 characters allowed.', 'error');
                return;
            }
            
            // Disable button and show loading
            button.disabled = true;
            button.textContent = 'Analyzing...';
            
            showLoadingResult(resultsDiv, 'text');
            
            try {
                console.log('üì§ Sending text verification request');
                
                const response = await enhancedFetch('/api/fact-check', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ claim: text })
                });
                
                const result = await response.json();
                console.log('üì• Text verification result:', result);
                
                if (result.error) {
                    throw new Error(result.error);
                }
                
                // Add to analytics
                addToAnalytics('text_verification', result);
                
                showTextResult(resultsDiv, result);
                
            } catch (error) {
                console.error('‚ùå Text verification error:', error);
                showErrorResult(resultsDiv, error.message);
            } finally {
                button.disabled = false;
                button.textContent = 'Analyze Text Authenticity';
            }
        }
        
        // Batch text verification
        async function verifyBatchText() {
            const textInput = document.getElementById('batchTextInput');
            const resultsDiv = document.getElementById('batchResults');
            const button = document.getElementById('batchVerifyBtn');
            
            const text = textInput.value.trim();
            if (!text) {
                showNotification('Please enter text claims to verify', 'error');
                return;
            }
            
            // Split text into individual claims (by line)
            const claims = text.split('\n')
                .map(claim => claim.trim())
                .filter(claim => claim.length > 0);
            
            if (claims.length === 0) {
                showNotification('No valid claims found', 'error');
                return;
            }
            
            if (claims.length > 10) {
                showNotification('Maximum 10 claims per batch', 'error');
                return;
            }
            
            // Disable button and show loading
            button.disabled = true;
            button.textContent = `Processing ${claims.length} claims...`;
            
            showBatchLoadingResult(resultsDiv, claims.length);
            
            try {
                console.log(`üì§ Sending batch verification request for ${claims.length} claims`);
                
                const response = await enhancedFetch('/api/batch-fact-check', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ claims: claims })
                });
                
                const result = await response.json();
                console.log('üì• Batch verification result:', result);
                
                if (result.error) {
                    throw new Error(result.error);
                }
                
                // Add to analytics
                addToAnalytics('batch_verification', result);
                
                showBatchResults(resultsDiv, result, claims);
                
            } catch (error) {
                console.error('‚ùå Batch verification error:', error);
                showErrorResult(resultsDiv, error.message);
            } finally {
                button.disabled = false;
                button.textContent = 'Verify All Claims';
            }
        }
        
        // PDF Verification with real-time progress
        async function verifyPDF() {
            const resultsDiv = document.getElementById('pdfResults');
            const button = document.getElementById('pdfVerifyBtn');
            
            const pdfData = window.currentPDFData();
            if (!pdfData) {
                showNotification('Please upload a PDF file first', 'error');
                return;
            }
            
            // Disable button and show loading
            button.disabled = true;
            button.textContent = 'Extracting & Analyzing...';
            
            showLoadingResult(resultsDiv, 'pdf');
            
            try {
                console.log('üì§ Sending PDF verification request');
                
                const response = await enhancedFetch('/api/verify-pdf', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ pdf_data: pdfData })
                });
                
                const result = await response.json();
                console.log('üì• PDF verification result:', result);
                
                if (result.error) {
                    throw new Error(result.error);
                }
                
                // Add to analytics
                addToAnalytics('pdf_verification', result);
                
                showPDFResult(resultsDiv, result);
                
            } catch (error) {
                console.error('‚ùå PDF verification error:', error);
                showErrorResult(resultsDiv, error.message);
            } finally {
                button.disabled = false;
                button.textContent = 'üìÑ Analyze PDF Document';
            }
        }
        
        async function verifyLink() {
            const linkInput = document.getElementById('linkInput');
            const resultsDiv = document.getElementById('linkResults');
            const button = document.querySelector('#linkInterface .verify-button');
            
            const url = linkInput.value.trim();
            if (!url) {
                showNotification('Please enter a URL to verify', 'error');
                return;
            }
            
            // Disable button and show loading
            button.disabled = true;
            button.textContent = 'Verifying...';
            
            showLoadingResult(resultsDiv);
            
            try {
                console.log('üì§ Sending link verification request for:', url);
                
                const response = await enhancedFetch('/api/verify-link', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ url: url })
                });
                
                const result = await response.json();
                console.log('üì• Link verification result:', result);
                
                if (result.error) {
                    throw new Error(result.error);
                }
                
                showLinkResult(resultsDiv, result);
                
            } catch (error) {
                console.error('‚ùå Link verification error:', error);
                showErrorResult(resultsDiv, error.message);
            } finally {
                button.disabled = false;
                button.textContent = 'Verify Link Safety';
            }
        }
        
        // Enhanced loading result with real-time progress
        function showLoadingResult(container, type = 'general') {
            const loadingMessages = {
                'text': [
                    'Analyzing text content...',
                    'Cross-referencing with knowledge bases...',
                    'Evaluating evidence quality...',
                    'Generating final verdict...'
                ],
                'pdf': [
                    'Extracting text from PDF...',
                    'Processing document structure...',
                    'Analyzing content for accuracy...',
                    'Cross-referencing claims...'
                ],
                'general': [
                    'Processing request...',
                    'Analyzing data...',
                    'Generating results...'
                ]
            };
            
            const messages = loadingMessages[type] || loadingMessages['general'];
            let currentMessageIndex = 0;
            
            container.innerHTML = `
                <div class="result show">
                    <div style="text-align: center; padding: 2rem;">
                        <div class="loading-animation" style="margin-bottom: 2rem;">
                            <div class="neural-loader">
                                <div class="neural-ring"></div>
                                <div class="neural-ring"></div>
                                <div class="neural-ring"></div>
                                <div class="neural-core"></div>
                            </div>
                            <div class="data-stream">
                                <div class="stream-line"></div>
                                <div class="stream-line"></div>
                                <div class="stream-line"></div>
                            </div>
                        </div>
                        <h3 class="loading-title">Processing...</h3>
                        <p class="loading-subtitle" id="loadingMessage">${messages[0]}</p>
                        <div class="processing-dots">
                            <span></span><span></span><span></span>
                        </div>
                        <div style="margin-top: 1rem; font-size: 0.8rem; color: var(--text-secondary);">
                            <div id="progressBar" style="width: 100%; height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; overflow: hidden;">
                                <div id="progressFill" style="width: 0%; height: 100%; background: linear-gradient(90deg, var(--primary-color), var(--secondary-color)); transition: width 0.5s ease;"></div>
                            </div>
                            <div style="margin-top: 0.5rem;" id="progressText">Initializing...</div>
                        </div>
                    </div>
                </div>
            `;
            
            // Add GSAP animations to the loading elements
            const neuralRings = container.querySelectorAll('.neural-ring');
            const streamLines = container.querySelectorAll('.stream-line');
            const dots = container.querySelectorAll('.processing-dots span');
            const progressFill = container.querySelector('#progressFill');
            const progressText = container.querySelector('#progressText');
            const loadingMessage = container.querySelector('#loadingMessage');
            
            // Animate neural rings
            neuralRings.forEach((ring, index) => {
                gsap.to(ring, {
                    rotation: 360,
                    duration: 2 + index * 0.5,
                    repeat: -1,
                    ease: 'none'
                });
            });
            
            // Animate data streams
            streamLines.forEach((line, index) => {
                gsap.fromTo(line, 
                    { scaleY: 0 },
                    { 
                        scaleY: 1, 
                        duration: 0.8,
                        repeat: -1,
                        yoyo: true,
                        delay: index * 0.2,
                        ease: 'power2.inOut'
                    }
                );
            });
            
            // Animate dots
            gsap.to(dots, {
                opacity: 0.3,
                duration: 0.6,
                repeat: -1,
                yoyo: true,
                stagger: 0.2
            });
            
            // Simulate progress with realistic timing
            let progress = 0;
            const progressInterval = setInterval(() => {
                progress += Math.random() * 15 + 5; // Random progress between 5-20%
                if (progress > 100) progress = 100;
                
                gsap.to(progressFill, { width: `${progress}%`, duration: 0.5 });
                
                // Update message based on progress
                const messageIndex = Math.floor((progress / 100) * messages.length);
                if (messageIndex !== currentMessageIndex && messageIndex < messages.length) {
                    currentMessageIndex = messageIndex;
                    gsap.to(loadingMessage, {
                        opacity: 0,
                        duration: 0.3,
                        onComplete: () => {
                            loadingMessage.textContent = messages[currentMessageIndex];
                            gsap.to(loadingMessage, { opacity: 1, duration: 0.3 });
                        }
                    });
                }
                
                progressText.textContent = `${progress.toFixed(0)}% complete`;
                
                if (progress >= 100) {
                    clearInterval(progressInterval);
                    progressText.textContent = 'Finalizing results...';
                }
            }, 800);
            
            // Store interval for cleanup
            container.progressInterval = progressInterval;
        }
        
        // Enhanced text result display with detailed analytics
        function showTextResult(container, data) {
            // Clear any ongoing progress intervals
            if (container.progressInterval) {
                clearInterval(container.progressInterval);
            }
            
            let resultClass = '';
            let icon = '';
            let status = '';
            let confidenceColor = '';
            
            // Determine result type
            if (data.verdict === 'SUPPORTS') {
                resultClass = 'verified';
                icon = '‚úÖ';
                status = 'VERIFIED AUTHENTIC';
                confidenceColor = '#00ff64';
            } else if (data.verdict === 'DOES NOT SUPPORT') {
                resultClass = 'fake';
                icon = '‚ùå';
                status = 'NOT SUPPORTED';
                confidenceColor = '#ff4444';
            } else {
                resultClass = 'uncertain';
                icon = '‚ö†Ô∏è';
                status = 'INSUFFICIENT EVIDENCE';
                confidenceColor = '#ffed4e';
            }
            
            const confidenceScore = data.confidence_score || 0.5;
            const processingTime = data.processing_time || 0;
            const evidenceCount = data.evidence_count || 0;
            const wordCount = data.word_count || 0;
            
            container.innerHTML = `
                <div class="result ${resultClass}">
                    <div class="result-header">
                        ${icon} ${status}
                    </div>
                    
                    <!-- Confidence Score Display -->
                    <div style="text-align: center; margin: 2rem 0;">
                        <div style="display: inline-block; position: relative; width: 120px; height: 120px;">
                            <svg width="120" height="120" style="transform: rotate(-90deg);">
                                <circle cx="60" cy="60" r="50" stroke="rgba(255,255,255,0.1)" stroke-width="8" fill="none"/>
                                <circle cx="60" cy="60" r="50" stroke="${confidenceColor}" stroke-width="8" fill="none" 
                                        stroke-dasharray="${2 * Math.PI * 50}" 
                                        stroke-dashoffset="${2 * Math.PI * 50 * (1 - confidenceScore)}" 
                                        style="transition: stroke-dashoffset 2s ease;"/>
                            </svg>
                            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                                <div style="font-size: 1.5rem; font-weight: 900; color: ${confidenceColor};">${Math.round(confidenceScore * 100)}%</div>
                                <div style="font-size: 0.8rem; color: var(--text-secondary);">Confidence</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="result-details">
                        <div class="result-item">
                            <div class="result-item-title">Primary Analysis:</div>
                            <div>${data.justification1 || 'Primary analysis completed successfully.'}</div>
                        </div>
                        <div class="result-item">
                            <div class="result-item-title">Secondary Analysis:</div>
                            <div>${data.justification2 || 'Secondary verification performed.'}</div>
                        </div>
                        <div class="result-item">
                            <div class="result-item-title">Final Verdict:</div>
                            <div>${data.reasoning || data.verdict || 'Analysis completed'}</div>
                        </div>
                        
                        <!-- Analytics Display -->
                        <div class="result-item">
                            <div class="result-item-title">Analysis Metrics:</div>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem; margin-top: 0.5rem;">
                                <div style="text-align: center; padding: 0.5rem; background: rgba(255,255,255,0.05); border-radius: 8px;">
                                    <div style="font-size: 1.2rem; font-weight: 600; color: var(--primary-color);">${wordCount}</div>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">Words</div>
                                </div>
                                <div style="text-align: center; padding: 0.5rem; background: rgba(255,255,255,0.05); border-radius: 8px;">
                                    <div style="font-size: 1.2rem; font-weight: 600; color: var(--primary-color);">${evidenceCount}</div>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">Evidence</div>
                                </div>
                                <div style="text-align: center; padding: 0.5rem; background: rgba(255,255,255,0.05); border-radius: 8px;">
                                    <div style="font-size: 1.2rem; font-weight: 600; color: var(--primary-color);">${processingTime.toFixed(1)}s</div>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">Processing</div>
                                </div>
                            </div>
                        </div>
                        
                        ${data.cached ? `
                        <div class="result-item">
                            <div class="result-item-title">Cache Status:</div>
                            <div style="color: var(--accent-color);">üìã Result retrieved from cache for faster response</div>
                        </div>
                        ` : ''}
                        
                        <div style="margin-top: 1rem; padding: 0.5rem; background: rgba(255,255,255,0.05); border-radius: 8px; font-size: 0.8rem; color: var(--text-secondary);">
                            Request ID: ${data.request_id || 'unknown'} | Analyzed at: ${new Date().toLocaleTimeString()}
                        </div>
                    </div>
                    
                    <!-- Feedback Section -->
                    <div style="margin-top: 2rem; text-align: center;">
                        <div style="margin-bottom: 1rem; font-size: 0.9rem; color: var(--text-secondary);">Was this analysis helpful?</div>
                        <div style="display: flex; justify-content: center; gap: 1rem;">
                            <button onclick="submitFeedback('positive', '${data.request_id}')" style="background: rgba(0,255,100,0.2); border: 1px solid rgba(0,255,100,0.5); color: #00ff64; padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer;">üëç Helpful</button>
                            <button onclick="submitFeedback('negative', '${data.request_id}')" style="background: rgba(255,100,100,0.2); border: 1px solid rgba(255,100,100,0.5); color: #ff6464; padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer;">üëé Not Helpful</button>
                        </div>
                    </div>
                </div>
            `;
            
            // Animate result
            gsap.fromTo(container.querySelector('.result'),
                { opacity: 0, scale: 0.9, y: 30 },
                { opacity: 1, scale: 1, y: 0, duration: 0.8, ease: 'power3.out' }
            );
            
            // Animate confidence circle
            setTimeout(() => {
                const circle = container.querySelector('circle[stroke-dasharray]');
                if (circle) {
                    gsap.fromTo(circle,
                        { strokeDashoffset: 2 * Math.PI * 50 },
                        { strokeDashoffset: 2 * Math.PI * 50 * (1 - confidenceScore), duration: 2, ease: 'power2.out' }
                    );
                }
            }, 200);
        }
        
        function showLinkResult(container, data) {
            let resultClass = '';
            let icon = '';
            let status = '';
            
            // Check for malicious content first
            if (data.is_malicious || data.verdict === 'Malicious Link') {
                resultClass = 'malicious';
                icon = 'üö®';
                status = 'Malicious Link';
            } else if (data.verdict === 'It is safe to use') {
                resultClass = 'verified';
                icon = '‚úÖ';
                status = 'It is safe to use';
            } else {
                // Handle other cases based on verdict
                switch (data.verdict) {
                    case 'TRUSTED':
                    case 'VERIFIED SAFE':
                        resultClass = 'verified';
                        icon = '‚úÖ';
                        status = 'It is safe to use';
                        break;
                    case 'QUESTIONABLE':
                        resultClass = 'uncertain';
                        icon = '‚ö†Ô∏è';
                        status = 'Questionable Link';
                        break;
                    case 'SUSPICIOUS':
                    case 'MALICIOUS LINK DETECTED':
                        resultClass = 'malicious';
                        icon = 'üö®';
                        status = 'Malicious Link';
                        break;
                    default:
                        // Default to safe if no specific threat detected
                        if (data.reliability_score && data.reliability_score >= 0.4) {
                            resultClass = 'verified';
                            icon = '‚úÖ';
                            status = 'It is safe to use';
                        } else {
                            resultClass = 'uncertain';
                            icon = '‚ö†Ô∏è';
                            status = 'Questionable Link';
                        }
                }
            }
            
            let reliabilityScore = '';
            if (data.reliability_score !== undefined) {
                const percentage = (data.reliability_score * 100).toFixed(1);
                const color = data.reliability_score >= 0.7 ? '#00ff64' : 
                             data.reliability_score >= 0.4 ? '#ffed4e' : '#ff4444';
                reliabilityScore = `
                    <div class="result-score" style="color: ${color}">
                        Reliability: ${percentage}%
                    </div>
                `;
            }
            
            let warningMessage = '';
            if (data.is_malicious) {
                warningMessage = `
                    <div style="background: rgba(255, 0, 0, 0.2); border: 1px solid rgba(255, 0, 0, 0.5); border-radius: 12px; padding: 1.5rem; margin-top: 1rem; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 1rem;">‚ö†Ô∏è</div>
                        <strong>SECURITY WARNING</strong><br>
                        This link may contain malware or pose security risks!
                    </div>
                `;
            }
            
            container.innerHTML = `
                <div class="result ${resultClass}">
                    <div class="result-header">
                        ${icon} ${status}
                    </div>
                    <div class="result-details">
                        <div class="result-item">
                            <div class="result-item-title">Security Analysis:</div>
                            <div>${data.justification1 || 'Comprehensive security scan completed.'}</div>
                        </div>
                        <div class="result-item">
                            <div class="result-item-title">Reputation Check:</div>
                            <div>${data.justification2 || 'Domain reputation evaluated successfully.'}</div>
                        </div>
                        <div class="result-item">
                            <div class="result-item-title">Final Assessment:</div>
                            <div>${data.reasoning || data.verdict || 'Verification completed'}</div>
                        </div>
                    </div>
                    ${reliabilityScore}
                    ${warningMessage}
                </div>
            `;
            
            // Animate result
            gsap.fromTo(container.querySelector('.result'),
                { opacity: 0, scale: 0.9, y: 30 },
                { opacity: 1, scale: 1, y: 0, duration: 0.8, ease: 'power3.out' }
            );
        }
        
        function showErrorResult(container, errorMessage) {
            // Enhanced error messaging with specific troubleshooting steps
            let troubleshootingMsg = 'Please check your input and try again, or contact support if the issue persists.';
            
            if (errorMessage.includes('Failed to fetch')) {
                troubleshootingMsg = `
                    <strong>Connection Issue:</strong><br>
                    ‚Ä¢ Ensure the Flask server is running on <a href="http://localhost:5000" target="_blank" style="color: #00ffff;">http://localhost:5000</a><br>
                    ‚Ä¢ Check if your firewall is blocking the connection<br>
                    ‚Ä¢ Try refreshing the page and retry<br>
                    ‚Ä¢ Verify you're accessing the correct URL
                `;
            } else if (errorMessage.includes('HTTP 500')) {
                troubleshootingMsg = 'Internal server error. Please check the server console for detailed error messages.';
            } else if (errorMessage.includes('HTTP 404')) {
                troubleshootingMsg = 'API endpoint not found. Please ensure you\'re using the correct application version.';
            } else if (errorMessage.includes('Network')) {
                troubleshootingMsg = 'Network connectivity issue. Please check your internet connection and try again.';
            }
            
            container.innerHTML = `
                <div class="result fake">
                    <div class="result-header">
                        ‚ùå Verification Error
                    </div>
                    <div class="result-details">
                        <div class="result-item">
                            <div class="result-item-title">Error Details:</div>
                            <div style="font-family: monospace; background: rgba(255,255,255,0.1); padding: 0.5rem; border-radius: 4px; margin-top: 0.5rem;">${errorMessage}</div>
                        </div>
                        <div class="result-item">
                            <div class="result-item-title">Troubleshooting:</div>
                            <div style="line-height: 1.6;">${troubleshootingMsg}</div>
                        </div>
                        <div class="result-item">
                            <div class="result-item-title">Server Status:</div>
                            <div>
                                <button onclick="checkServerStatus()" style="background: linear-gradient(45deg, var(--primary-color), var(--secondary-color)); border: none; padding: 0.5rem 1rem; border-radius: 8px; color: white; cursor: pointer; margin-top: 0.5rem;">
                                    üîç Check Server Connection
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            gsap.fromTo(container.querySelector('.result'),
                { opacity: 0, scale: 0.9, y: 30 },
                { opacity: 1, scale: 1, y: 0, duration: 0.8, ease: 'power3.out' }
            );
        }
        
        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: ${type === 'error' ? 'rgba(255, 50, 50, 0.9)' : type === 'success' ? 'rgba(0, 255, 100, 0.9)' : 'rgba(0, 255, 255, 0.9)'};
                color: white;
                padding: 1rem 2rem;
                border-radius: 12px;
                font-weight: 600;
                z-index: 10000;
                backdrop-filter: blur(20px);
                transform: translateX(400px);
                opacity: 0;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            // Animate in
            gsap.to(notification, {
                x: 0,
                opacity: 1,
                duration: 0.5,
                ease: 'power3.out'
            });
            
            // Animate out after 3 seconds
            setTimeout(() => {
                gsap.to(notification, {
                    x: 400,
                    opacity: 0,
                    duration: 0.5,
                    onComplete: () => notification.remove()
                });
            }, 3000);
        }
        
        // Server status check function
        async function checkServerStatus() {
            const statusButton = event.target;
            const originalText = statusButton.textContent;
            
            statusButton.textContent = 'üîÑ Checking...';
            statusButton.disabled = true;
            
            try {
                const response = await fetch('/health', { 
                    method: 'GET',
                    timeout: 5000
                });
                
                if (response.ok) {
                    const result = await response.json();
                    statusButton.textContent = '‚úÖ Server Online';
                    statusButton.style.background = 'linear-gradient(45deg, #00ff64, #00cc50)';
                    
                    showNotification('Server is running correctly! Try your request again.', 'success');
                    
                    // Auto-refresh the page after 2 seconds
                    setTimeout(() => {
                        window.location.reload();
                    }, 2000);
                } else {
                    throw new Error(`Server responded with status: ${response.status}`);
                }
            } catch (error) {
                console.error('Server status check failed:', error);
                statusButton.textContent = '‚ùå Server Offline';
                statusButton.style.background = 'linear-gradient(45deg, #ff4444, #cc0000)';
                
                // Show detailed connection guidance
                showServerConnectionGuide();
            } finally {
                setTimeout(() => {
                    statusButton.textContent = originalText;
                    statusButton.disabled = false;
                    statusButton.style.background = 'linear-gradient(45deg, var(--primary-color), var(--secondary-color))';
                }, 3000);
            }
        }
        
        function showServerConnectionGuide() {
            const guide = document.createElement('div');
            guide.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0, 0, 0, 0.95);
                color: white;
                padding: 2rem;
                border-radius: 16px;
                border: 2px solid var(--primary-color);
                z-index: 10001;
                max-width: 500px;
                backdrop-filter: blur(20px);
                box-shadow: 0 20px 40px rgba(0, 255, 255, 0.3);
            `;
            
            guide.innerHTML = `
                <h3 style="color: var(--primary-color); margin-bottom: 1rem; font-family: 'Orbitron', monospace;">üöë Server Connection Guide</h3>
                <div style="line-height: 1.8; margin-bottom: 1.5rem;">
                    <p><strong>1. Start the Flask Server:</strong></p>
                    <code style="background: rgba(255,255,255,0.1); padding: 0.5rem; border-radius: 4px; display: block; margin: 0.5rem 0;">python app.py</code>
                    
                    <p><strong>2. Expected Output:</strong></p>
                    <code style="background: rgba(255,255,255,0.1); padding: 0.5rem; border-radius: 4px; display: block; margin: 0.5rem 0; font-size: 0.8rem;">* Running on http://127.0.0.1:5000</code>
                    
                    <p><strong>3. Access URLs:</strong></p>
                    <a href="http://localhost:5000" target="_blank" style="color: var(--primary-color); text-decoration: none;">‚Ä¢ http://localhost:5000</a><br>
                    <a href="http://127.0.0.1:5000" target="_blank" style="color: var(--primary-color); text-decoration: none;">‚Ä¢ http://127.0.0.1:5000</a>
                    
                    <p style="margin-top: 1rem;"><strong>4. Troubleshooting:</strong></p>
                    ‚Ä¢ Check if Python and Flask are installed<br>
                    ‚Ä¢ Verify no other service is using port 5000<br>
                    ‚Ä¢ Try running with admin privileges<br>
                    ‚Ä¢ Check Windows Firewall settings
                </div>
                <button onclick="this.parentElement.remove()" style="background: var(--primary-color); border: none; padding: 0.75rem 1.5rem; border-radius: 8px; color: black; font-weight: 600; cursor: pointer; float: right;">
                    Got it! ‚úì
                </button>
                <div style="clear: both;"></div>
            `;
            
            document.body.appendChild(guide);
            
            // Animate in
            gsap.fromTo(guide, 
                { opacity: 0, scale: 0.8 },
                { opacity: 1, scale: 1, duration: 0.5, ease: 'power3.out' }
            );
        }
        
        // Enhanced fetch with retry logic and better error handling
        async function enhancedFetch(url, options, retries = 2) {
            for (let i = 0; i <= retries; i++) {
                try {
                    console.log(`üîÑ Attempt ${i + 1} for ${url}`);
                    
                    // Add timeout to fetch
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 30000); // 30 second timeout
                    
                    const response = await fetch(url, {
                        ...options,
                        signal: controller.signal
                    });
                    
                    clearTimeout(timeoutId);
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    
                    return response;
                    
                } catch (error) {
                    console.warn(`‚ö†Ô∏è Attempt ${i + 1} failed:`, error.message);
                    
                    if (i === retries) {
                        // Last attempt failed
                        if (error.name === 'AbortError') {
                            throw new Error('Request timed out after 30 seconds. The server might be processing a large request.');
                        } else if (error.message.includes('Failed to fetch')) {
                            throw new Error('Failed to connect to server. Please ensure the Flask server is running on http://localhost:5000');
                        } else {
                            throw error;
                        }
                    }
                    
                    // Wait before retry (exponential backoff)
                    await new Promise(resolve => setTimeout(resolve, Math.pow(2, i) * 1000));
                }
            }
        }
        // Text tab switching function
        function showTextTab(tabName) {
            // Remove active class from all tabs and contents
            document.querySelectorAll('.stego-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.stego-tab-content').forEach(content => content.classList.remove('active'));
            
            // Add active class to selected tab and content
            document.querySelector(`[onclick="showTextTab('${tabName}')"]`).classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }
        
        // PDF Upload functionality
        function initPDFUpload() {
            const pdfUpload = document.getElementById('pdfUpload');
            const pdfInput = document.getElementById('pdfInput');
            const pdfInfo = document.getElementById('pdfInfo');
            const pdfDetails = document.getElementById('pdfDetails');
            const verifyBtn = document.getElementById('pdfVerifyBtn');
            
            let currentPDFData = null;
            
            // Click to upload
            pdfUpload.addEventListener('click', () => {
                pdfInput.click();
            });
            
            // Drag and drop functionality
            pdfUpload.addEventListener('dragover', (e) => {
                e.preventDefault();
                pdfUpload.classList.add('dragover');
            });
            
            pdfUpload.addEventListener('dragleave', () => {
                pdfUpload.classList.remove('dragover');
            });
            
            pdfUpload.addEventListener('drop', (e) => {
                e.preventDefault();
                pdfUpload.classList.remove('dragover');
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handlePDFFile(files[0]);
                }
            });
            
            // File input change
            pdfInput.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    handlePDFFile(e.target.files[0]);
                }
            });
            
            function handlePDFFile(file) {
                if (file.type !== 'application/pdf') {
                    showNotification('Please select a PDF file', 'error');
                    return;
                }
                
                // Show file info
                const fileSizeMB = (file.size / (1024 * 1024)).toFixed(2);
                
                pdfDetails.innerHTML = `
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; font-size: 0.9rem;">
                        <div><strong>File Name:</strong> ${file.name}</div>
                        <div><strong>File Size:</strong> ${fileSizeMB} MB</div>
                        <div><strong>Type:</strong> PDF Document</div>
                        <div><strong>Last Modified:</strong> ${new Date(file.lastModified).toLocaleDateString()}</div>
                    </div>
                `;
                
                pdfInfo.style.display = 'block';
                
                // Convert to base64
                const reader = new FileReader();
                reader.onload = function(e) {
                    currentPDFData = e.target.result;
                    verifyBtn.disabled = false;
                    showNotification('PDF loaded successfully', 'success');
                };
                reader.readAsDataURL(file);
            }
            
            // Store PDF data globally for verification
            window.currentPDFData = () => currentPDFData;
        }
        
        // PDF Verification function
        async function verifyPDF() {
            const resultsDiv = document.getElementById('pdfResults');
            const button = document.getElementById('pdfVerifyBtn');
            
            const pdfData = window.currentPDFData();
            if (!pdfData) {
                showNotification('Please upload a PDF file first', 'error');
                return;
            }
            
            // Disable button and show loading
            button.disabled = true;
            button.textContent = 'Extracting & Analyzing...';
            
            showLoadingResult(resultsDiv);
            
            try {
                console.log('üì§ Sending PDF verification request');
                
                const response = await fetch('/api/verify-pdf', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ pdf_data: pdfData })
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const result = await response.json();
                console.log('üì• PDF verification result:', result);
                
                if (result.error) {
                    throw new Error(result.error);
                }
                
                showPDFResult(resultsDiv, result);
                
            } catch (error) {
                console.error('‚ùå PDF verification error:', error);
                showErrorResult(resultsDiv, error.message);
            } finally {
                button.disabled = false;
                button.textContent = 'üìã Verify PDF Content';
            }
        }
        
        // Analytics and feedback functions
        function addToAnalytics(type, data) {
            const analyticsEntry = {
                timestamp: new Date().toISOString(),
                type: type,
                verdict: data.verdict || data.prediction,
                confidence: data.confidence_score || 0.5,
                processing_time: data.processing_time || 0,
                cached: data.cached || false,
                request_id: data.request_id
            };
            
            analyticsData.push(analyticsEntry);
            
            // Keep only last 100 entries
            if (analyticsData.length > 100) {
                analyticsData = analyticsData.slice(-100);
            }
            
            // Store in localStorage
            try {
                localStorage.setItem('truthguard_analytics', JSON.stringify(analyticsData));
            } catch (e) {
                console.warn('Failed to store analytics data:', e);
            }
        }
        
        function loadAnalytics() {
            try {
                const stored = localStorage.getItem('truthguard_analytics');
                if (stored) {
                    analyticsData = JSON.parse(stored);
                }
            } catch (e) {
                console.warn('Failed to load analytics data:', e);
                analyticsData = [];
            }
        }
        
        async function submitFeedback(type, requestId) {
            try {
                const response = await fetch('/api/feedback', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        request_id: requestId,
                        feedback_type: type,
                        timestamp: new Date().toISOString()
                    })
                });
                
                if (response.ok) {
                    showNotification(
                        type === 'positive' ? 'Thank you for your feedback!' : 'Feedback received - we\'ll improve!',
                        'success'
                    );
                }
            } catch (error) {
                console.warn('Failed to submit feedback:', error);
                showNotification('Feedback recorded locally', 'info');
            }
        }
        
        // Offline queue processing
        function processOfflineQueue() {
            if (processingQueue.length === 0) return;
            
            const queue = [...processingQueue];
            processingQueue = [];
            
            queue.forEach(async (item) => {
                try {
                    const response = await fetch(item.url, item.options);
                    if (response.ok) {
                        showNotification('Queued request processed successfully', 'success');
                    }
                } catch (error) {
                    // Re-queue if still fails
                    processingQueue.push(item);
                }
            });
        }
        
        function addToOfflineQueue(url, options) {
            processingQueue.push({ url, options, timestamp: Date.now() });
            showNotification('Request queued for when connection is restored', 'info');
        }
        
        // Initialize application when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üõ°Ô∏è TruthGuard AI - Advanced Verification System v2.0');
            console.log('üöÄ Initializing enhanced features...');
            
            // Load analytics from localStorage
            loadAnalytics();
            
            // Initialize all components
            initCursor();
            initParticles();
            initPDFUpload();
            initImageUploads();
            
            // Check for PWA install capability
            if ('serviceWorker' in navigator) {
                console.log('üìã PWA features available');
            }
            
            // Check connection status
            console.log(`üåê Connection status: ${isOnline ? 'Online' : 'Offline'}`);
            
            // Start loading sequence
            initLoading();
            
            console.log('‚úÖ TruthGuard AI initialized successfully');
        });
        
        // Show installation button for PWA
        function showPWAInstallButton() {
            const installButton = document.createElement('button');
            installButton.innerHTML = 'üì¢ Install App';
            installButton.style.cssText = `
                position: fixed;
                bottom: 100px;
                right: 20px;
                background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
                border: none;
                color: white;
                padding: 12px 24px;
                border-radius: 25px;
                font-weight: 600;
                cursor: pointer;
                z-index: 1000;
                box-shadow: 0 4px 15px rgba(0, 255, 255, 0.3);
                transform: translateY(100px);
                transition: all 0.3s ease;
            `;
            
            installButton.addEventListener('click', installPWA);
            document.body.appendChild(installButton);
            
            // Animate in
            gsap.to(installButton, {
                y: 0,
                duration: 0.5,
                ease: 'back.out(1.7)'
            });
            
            // Auto-hide after 10 seconds
            setTimeout(() => {
                if (installButton.parentElement) {
                    gsap.to(installButton, {
                        y: 100,
                        opacity: 0,
                        duration: 0.5,
                        onComplete: () => installButton.remove()
                    });
                }
            }, 10000);
        }
        
        function showStegoTab(tabName) {
            // Hide all stego tab contents
            document.querySelectorAll('.stego-tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active class from all stego tabs
            document.querySelectorAll('.stego-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
        }
        
        // Initialize image upload handlers
        function initImageUploads() {
            const uploaders = [
                { area: 'encodeImageUpload', input: 'encodeImageInput', preview: 'encodeImagePreview', button: 'encodeBtn' },
                { area: 'decodeImageUpload', input: 'decodeImageInput', preview: 'decodeImagePreview', button: 'decodeBtn' }
            ];
            
            uploaders.forEach(uploader => {
                const uploadArea = document.getElementById(uploader.area);
                const fileInput = document.getElementById(uploader.input);
                const preview = document.getElementById(uploader.preview);
                const button = document.getElementById(uploader.button);
                
                if (!uploadArea || !fileInput || !preview || !button) return;
                
                // Click to upload
                uploadArea.addEventListener('click', () => {
                    fileInput.click();
                });
                
                // File input change
                fileInput.addEventListener('change', (e) => {
                    const file = e.target.files[0];
                    if (file) {
                        handleImageUpload(file, preview, button, uploadArea);
                    }
                });
                
                // Drag and drop
                uploadArea.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    uploadArea.classList.add('dragover');
                });
                
                uploadArea.addEventListener('dragleave', () => {
                    uploadArea.classList.remove('dragover');
                });
                
                uploadArea.addEventListener('drop', (e) => {
                    e.preventDefault();
                    uploadArea.classList.remove('dragover');
                    
                    const file = e.dataTransfer.files[0];
                    if (file && file.type.startsWith('image/')) {
                        handleImageUpload(file, preview, button, uploadArea);
                    }
                });
            });
        }
        
        function handleImageUpload(file, preview, button, uploadArea) {
            const reader = new FileReader();
            reader.onload = (e) => {
                preview.src = e.target.result;
                preview.style.display = 'block';
                uploadArea.querySelector('.upload-placeholder').style.display = 'none';
                button.disabled = false;
                
                // Store the image data for later use
                button.dataset.imageData = e.target.result;
            };
            reader.readAsDataURL(file);
        }
        
        // Steganography Encoding
        async function encodeMessage() {
            const button = document.getElementById('encodeBtn');
            const resultsDiv = document.getElementById('encodeResults');
            const imageData = button.dataset.imageData;
            const message = document.getElementById('secretMessage').value.trim();
            
            if (!imageData) {
                showNotification('Please upload an image first', 'error');
                return;
            }
            
            if (!message) {
                showNotification('Please enter a message to hide', 'error');
                return;
            }
            
            button.disabled = true;
            button.textContent = 'Encoding...';
            
            showLoadingResult(resultsDiv);
            
            try {
                console.log('üîí Encoding message in image...');
                
                const response = await fetch('/api/steganography/encode', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ image: imageData, message: message })
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const result = await response.json();
                console.log('üîí Encoding result:', result);
                
                if (result.error) {
                    throw new Error(result.error);
                }
                
                showEncodingResult(resultsDiv, result);
                
            } catch (error) {
                console.error('‚ùå Encoding error:', error);
                showErrorResult(resultsDiv, error.message);
            } finally {
                button.disabled = false;
                button.textContent = 'üîí Hide Message in Image';
            }
        }
        
        // Steganography Decoding
        async function decodeMessage() {
            const button = document.getElementById('decodeBtn');
            const resultsDiv = document.getElementById('decodeResults');
            const imageData = button.dataset.imageData;
            
            if (!imageData) {
                showNotification('Please upload an image first', 'error');
                return;
            }
            
            button.disabled = true;
            button.textContent = 'Decoding...';
            
            showLoadingResult(resultsDiv);
            
            try {
                console.log('üîì Decoding message from image...');
                
                const response = await fetch('/api/steganography/decode', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ image: imageData })
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const result = await response.json();
                console.log('üîì Decoding result:', result);
                
                if (result.error) {
                    throw new Error(result.error);
                }
                
                showDecodingResult(resultsDiv, result);
                
            } catch (error) {
                console.error('‚ùå Decoding error:', error);
                showErrorResult(resultsDiv, error.message);
            } finally {
                button.disabled = false;
                button.textContent = 'üîì Extract Hidden Message';
            }
        }
        
        function showEncodingResult(container, result) {
            container.innerHTML = `
                <div class="result verified">
                    <div class="result-header">
                        ‚úÖ Message Successfully Encoded
                    </div>
                    
                    <div class="encoded-image-result">
                        <img src="${result.encoded_image}" alt="Encoded Image" id="encodedImageDisplay">
                        <p style="color: var(--text-secondary); margin-bottom: 1rem;">Your secret message has been hidden in this image</p>
                        <a href="${result.encoded_image}" download="encoded_image.png" class="download-button">
                            üìÅ Download Encoded Image
                        </a>
                    </div>
                    
                    <div class="result-details" style="margin-top: 2rem;">
                        <div class="result-item">
                            <div class="result-item-title">Original Message:</div>
                            <div style="font-style: italic; color: var(--text-secondary);">${result.original_message}</div>
                        </div>
                        <div class="result-item">
                            <div class="result-item-title">Status:</div>
                            <div>${result.message}</div>
                        </div>
                    </div>
                </div>
            `;
            
            gsap.fromTo(container.querySelector('.result'),
                { opacity: 0, scale: 0.9, y: 30 },
                { opacity: 1, scale: 1, y: 0, duration: 0.8, ease: 'power3.out' }
            );
        }
        
        function showDecodingResult(container, result) {
            const hasMessage = result.decoded_message && result.decoded_message.trim();
            
            container.innerHTML = `
                <div class="result ${hasMessage ? 'verified' : 'uncertain'}">
                    <div class="result-header">
                        ${hasMessage ? '‚úÖ Hidden Message Found' : '‚ö†Ô∏è No Hidden Message'}
                    </div>
                    
                    <div class="decoded-message ${hasMessage ? '' : 'no-message'}">
                        <div class="decoded-message-title">
                            ${hasMessage ? 'Decoded Secret Message:' : 'Search Result:'}
                        </div>
                        <div class="decoded-message-content">
                            ${hasMessage ? result.decoded_message : 'No hidden message was found in this image. The image may not contain steganographic content, or it may use a different encoding method.'}
                        </div>
                    </div>
                    
                    <div class="result-details" style="margin-top: 2rem;">
                        <div class="result-item">
                            <div class="result-item-title">Analysis Result:</div>
                            <div>${result.message}</div>
                        </div>
                    </div>
                </div>
            `;
            
            gsap.fromTo(container.querySelector('.result'),
                { opacity: 0, scale: 0.9, y: 30 },
                { opacity: 1, scale: 1, y: 0, duration: 0.8, ease: 'power3.out' }
            );
        }
        
        // Initialize everything when page loads
        window.addEventListener('load', () => {
            initCursor();
            initParticles();
            initLoading();
            
            // Initialize image uploads after a short delay
            setTimeout(() => {
                initImageUploads();
                initPDFUpload();
            }, 1000);
        });
        
        // Handle keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                if (currentSection !== 'hero') {
                    showHome();
                }
            }
        });
    </script>
</body>
</html>
